<!DOCTYPE html>
<html>
<head>
	<title>Nhân vật</title>
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<link rel="stylesheet" href="c/c.css">
</head>
<body class="w640">
	<script type="text/javascript" src="j/j.js"></script>		
	<script type="text/javascript" src="j/menuhead.js"></script>
	<style>
		#notice{ padding: 0.5rem  0; }
		#searchms input[type="number"]{     display: inline-block;
			padding: 2%;
			border: 1px solid #ccc;
			width: 60%;	font-size: 0.5rem; }
			#searchms span{ display: inline-block;
				padding: 2%;
				text-align: center;
				width: 28%;
				background: #ccc; }
			</style>
			<div id="content">

				<div id="notice"></div>

				<div id="searchms">
					<input type="number" placeholder="Mã số nhân vật">
					<span>Tìm kiếm</span>
				</div>

				<div id="col3">
				</div>
			<!-- 	<h2 id="layanh" style="background: #289cff; width: 100%; color: #fff; padding: 10px; text-align: center;">
					Lấy nhân vật khác
				</h2> -->
			</div>
			<script>
				$(document).ready( function(){


					var obj = [    
					{id:"1", total:"87"},
					{id:"2", total:"69"},
					{id:"3", total:"78"},
					{id:"4", total:"61"},
					{id:"5", total:"108"},
					{id:"6", total:"45"},			
					{id:"8", total:"47"},
					{id:"9", total:"46"},       
					{id:"10", total:"55"},
					{id:"11", total:"30"},
					{id:"13", total:"45"},
					{id:"14", total:"44"},
					{id:"15", total:"57"},
					{id:"16", total:"67"},
					{id:"18", total:"26"},
					{id:"24", total:"38"},
					{id:"25", total:"41"},
					{id:"32", total:"136"},
					{id:"33", total:"146"},
					{id:"34", total:"127"},
					{id:"38", total:"36"},
					{id:"39", total:"52"},
					{id:"40", total:"126"},

					{id:"26", total:"91"},
					{id:"27", total:"90"},
					{id:"28", total:"58"},
					{id:"44", total:"60"},
					{id:"56", total:"81"},
					{id:"70", total:"52"},
					{id:"71", total:"65"},
					{id:"74", total:"71"},
					{id:"75", total:"168"},
					{id:"78", total:"198"},
					{id:"79", total:"51"},
					]


					function getRandom(arr, n) {
						var result = new Array(n),
						len = arr.length,
						taken = new Array(len);
						if (n > len)
							throw new RangeError("getRandom: more elements taken than available");
						while (n--) {
							var x = Math.floor(Math.random() * len);
							result[n] = arr[x in taken ? taken[x] : x];
							taken[x] = --len in taken ? taken[len] : len;
						}
						return result;
					}

					function randomimg()
					{
						$("#notice").html("<b>Đang có khoảng " + obj.length + " nhân vật.<br> Hãy nhớ mã số của nhân vật để tra cứu dễ dàng. <br> Ấn nút lấy nhân vật khác nếu cảm thấy không phù hợp <br><br> <a style='color:#f00' href='nghenghiep.html'>Ấn vào đây để đặt tên nhân vật và xem nghề nghiệp.Nếu không thấy hãy xóa lịch sử hoặc để chọn chế độ ẩn danh trên trình duyệt </a>  </b>")
						$("#col3").html("");
						//var arr1 = getRandom(obj,6)

						//for (var i = 0; i < arr1.length; i++) {
							for (var i = 0; i < obj.length; i++) {
								$("#col3").append("<div><a href='nvct.html?id="+obj[i].id+"&total="+obj[i].total+"'><img src='nv/"+ obj[i].id +"/1.jpg' ></a><p>Nhân vật số "+obj[i].id+"</p></div>");


							}
						}

						randomimg();

						$("#layanh").click( function(){
							randomimg();
						});

						$("#searchms span").click( function(){
							var ms = $("#searchms input").val();
							if (ms != "") {
								var obj2 = obj.filter(function(obj1) {
									return (obj1.id === ms);
								});
							//console.log(obj2[0]);
							
							if (typeof obj2[0] !== "undefined") {
								$("#col3").html("<div><a href='nvct.html?id="+obj2[0].id+"&total="+obj2[0].total+"'><img src='nv/"+ obj2[0].id +"/1.jpg' ></a><p>Nhân vật số "+obj2[0].id+"</p></div>");
							}
							else{
								alert("Không tìm thấy!");
							}
						}

					});

					});
				</script>
				<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
			</body>
			</html>
